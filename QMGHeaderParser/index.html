<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dexrn's Hell Hole > QMG Header Parser</title>
    <meta content="Dexrn's Hell Hole > QMG Header Parser" property="og:title" />
    <script defer src="../js/lang.js"></script>
    <meta content="QMG Header Parser" property="og:description" />
    <meta content="https://DexrnZacAttack.github.io" property="og:url" />
    <meta content="https://github.com/DexrnZacAttack/QmageDecoder/blob/main/QMGDecoderIcon.png?raw=true" property="og:image" />
    <meta content="#0078D7" data-react-helmet="true" name="theme-color"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="QMG Header Parser">
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/DexrnZacAttack/DexrnZacAttack.github.io/main/assets/favicon.png">
    <link rel="stylesheet" href="../css/headerparser.css">
    <script src="../js/background.js"></script>
    <script src="../js/fadeout.js"></script>
    <script>
        function getLanguageFromCookie() {
            const cookies = document.cookie.split(';');
            for (const cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'userLanguage') {
                    return value;
                }
            }
            return null; // Cookie not found
        }

        // Redirect to /zh-CN if language is set to zh-CN
        function checkLang() {
            const userLanguage = getLanguageFromCookie();
            console.log(userLanguage);
            let langFilePath;

            switch (userLanguage) {
            case 'zh-CN':
                langFilePath = "../assets/lang/zh-CN.json";
                break;
            case 'en-US':
                langFilePath = "../assets/lang/en-US.json";
                break;
            default:
                langFilePath = "../assets/lang/en-US.json";
                break;
            }
            setLang(langFilePath);
        }

        // Usage:
        checkLang();

        



        // Dexrn: Localization! (Kinda janky.)
        function setLang(langFilePath) {
        fetch(langFilePath)
            .then(response => response.json())
            .then(data => {
                document.getElementById('backbtn').textContent = data.BackButton;
                document.getElementById('qmghp-path').textContent = data.QMGHeaderParserPath;
                document.getElementById('fileselectbtn').textContent = data.FileSelectButton;
                document.getElementById('output').textContent = data.QMGHPOutputText;
            })
            .catch(error => console.error('Error whilst loading lang file:', error));
        }
    </script>
</head>
<body>
    <div class="loadingcontainer">
        <div class="loading">
            <img id="loading-light" src="../assets/loader.gif">
            <img id="loading-dark" src="../assets/loader-dark.gif">
        </div>
    </div>
    <div class="contentcontainer"></div>
    <div class="bg">
        <div class="wrapper" id="wrapper">
            <div class="topcard" style="cursor: pointer;" id="back" linkto="../index.html">
                <div class="back" id="backbtn"></div>
            </div>
            <div class="card">
                <div class="card-title" id="qmghp-path"></div>
				<div class="center">
					<label for="fileInput" class="button2" id="fileselectbtn"></label>
                    <input type="file" id="fileInput" accept=".qmg, .spi, .spr, .bmp" style="display: none;">
				</div>
				 <pre id="output"></pre>
       </div>
       <!-- <div class="card" id="headercard">
        <pre id="header"></pre>
       </div> -->
    </div>
    </div>
    </div>
    <script src="../js/QMGParser.js"></script>
    <script>
                backgroundfade(true);
    </script>
</body>
</html>
